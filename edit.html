{% autoescape true %}
<html>
    <head>
        <title>Is there a game night this week?</title>
        <link type="text/css" rel="stylesheet" href="/stylesheets/main.css" />
    </head>
    <body>
        <h1>About</h1>
        <p>Allow people to invite gamenight over to their house. Select the days
        you want to host, and fill in the details (where, when, notes.)</p>
        <p>If multiple people are volunteering for the same weekend, we allow
        selecting how important it is for you to host. If you are willing to
        host, but have no particular attachment to this weekend, select 'can.'
        If you have a preference to host this week, select 'want.' And if there
        is a special occasion, and it is really important for you to host,
        select 'insist.'</p>
        <p>If multiple people are volunteering to host on the same weekend, the
        system will select someone randomly from the same priority level. That
        said, if you see someone else has asked to host on a weekend you
        particularly want, it is recommend you talk to them and have one or the
        other withdraw.</p>

        <h1>Current Schedule</h1>
        <ul>
            {% for gn in scheduled %}
                <li><span class="date">{{ gn.date.strftime('%x') }}</span> -
                    <span class="status">{{ gn.status }}</span>
                    {% if gn.status == 'Yes' %}
                        <span class="label">Where:</span>
                        <span class="location">{{ gn.location }}</span>
                        <span class="label">Host:</span>
                        <span class="location">{{ gn.owner.get().name }}</span></br>
                    {% endif %}
                    {% if gn.notes %}
                        <span class="notes">{{ gn.notes }}</span>
                    {% endif %}
                    {% if gn.owner == user or admin %}
                        <a href="/edit?gnid={{ gn.key.id() }}">Edit...</a>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>

        <h1>Invitations</h1>
        <form method="post">
            <ul>
                {% for app in applications %}
                    <li><span class="label">When:</span>
                        <span class="date">{{ app.date }}</span> @
                        <span class="label">Where:</span>
                        <span class="location">{{ app.location }}</span>
                        <span class="label">Host:</span>
                        <span class="host">{{ app.owner.get().name }}</span>
                        <span class="label">Priority:</span>
                        <span class="priority">{{ app.priority }}</span></br>
                        {% if app.notes %}
                            <span class="notes">{{ app.notes }}</span>
                        {% endif %}
                        {% if app.owner == user or admin %}
                            <a href="/edit?appid={{ app.key.id() }}">Withdraw...</a>
                        {% endif %}
                    </li>
                {% endfor %}
            </ul>
        </form>

        Invite people over!<br />
        <ul>
            <li><span class="label">When:</span>
                <input type="text" name="when"
                    value="{{ next_open }}" /></li>
            <li><span class="label">Where:</span>
                <input type="text" name="where"
                    value="{{ default }}" /></li>
            <li><span class="label">Priority:</span>
                <select name="priority">
                    <option>Can</option>
                    <option>Want</option>
                    <option>Insist</option>
                </select></li>
            <li><span class="label">Notes:</span>
                <input type="text" name="notes" /></li>
        </ul>

        <input type="submit" name="invite" value="Save"/>

        <h1>Preferences</h1>
        <form method="post">
            <ul>
                <li><label>Default location:
                    <input type="text" name="default"
                        value="{{ default }}" /></label>
            </ul>
            <input type="submit" name="preferences" value="Save"/>
        </form>

        {% if admin %}
            <h1>Users</h1>
            <form method="post">
                <table>
                    <tr><th>User</th><th>Name</th><th>Color</th><th>Admin</th></tr>
                    {% for user in users %}
                        <tr><td>{{ user.key.id() }}</td>
                            <td><input type="text" value="{{ user.name }}" /></td>
                            <td><input type="text" value="{{ user.color }}" /></td>
                            <td><input type="checkbox"
                                {% if user.admin %}checked{%endif%} /></td>
                        </tr>
                    {% endfor %}
                </table>
                <input type="submit" name="users" value="Save"/>
            </form>
        {% endif %}

        You are logged in as {{ user }}. <a href="{{ logout }}">Log out</a>
    </body>
</html>
{% endautoescape %}

<!-- # vim: set ts=4 sts=4 sw=4 et: -->
